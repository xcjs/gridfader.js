"use strict";var GridFader=function(t){this.palette=new Array,this.gridColor=null,this.canvas,this.brush,this.cellSize,this.gridSize,this.clockSpeed=500;var e=this,i=0,n=0;this.BindEvents=function(){window.onload=l.Init,window.onresize=l.Resize},this.ColorManagement={Color:function(t){this.r=0,this.g=0,this.b=0,this.a=1,"undefined"!=typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b,this.a="undefined"==typeof t.a?this.a:t.a),this.Darken=function(t){var i=new e.ColorManagement.Color;return i.r=Math.floor(this.r-t>=0?this.r-t:0),i.g=Math.floor(this.g-t>=0?this.g-t:0),i.b=Math.floor(this.b-t>=0?this.b-t:0),i.a=this.a,i},this.toString=function(){return"rgba("+Math.floor(this.r)+", "+Math.floor(this.g)+", "+Math.floor(this.b)+", "+this.a+")"}},GetRandomColor:function(){var t=e.palette,i=Math.floor(Math.random()*(t.length-1-0+1))+0,n=t[i],a=new e.ColorManagement.Color;return a.r=n.r,a.g=n.g,a.b=n.b,a.a=n.a,a}};var a={SetCanvasSize:function(){e.canvas.height=window.innerHeight,e.canvas.width=window.innerWidth}},l={Init:function(){e.canvas=document.getElementById(t),e.brush=e.canvas.getContext("2d"),l.Resize()},Resize:function(){clearInterval(i),a.SetCanvasSize(),e.DrawGrid(),e.CellManagement.GetAllCells(),i=setInterval(l.Tick,e.clockSpeed)},Tick:function(){if(7===n){var t=e.CellManagement.GetRandomCell();null===t.State?t.FadeIn():t.State===t.States.Full&&t.FadeOut(),n=0}else n++;for(var i=0,a=e.CellManagement.Cells;i<a.length;){var t=a[i];t.State===t.States.FadingIn?(t.FadeIn(),t.Draw()):t.State===t.States.FadingOut&&(t.FadeOut(),null!==t.State&&t.Draw()),i++}}};this.DrawGrid=function(){var t=e.brush,i=e.canvas,n=e.gridColor,a=e.gridSize,l=e.cellSize,h=0,o=0;for(t.beginPath(),t.strokeStyle=n.toString(),t.lineWidth=a;o<i.height;)o=l*h,t.moveTo(0,o),t.lineTo(i.width,o),h++;for(h=0,o=a;o<i.width;)o=l*h,t.moveTo(o,0),t.lineTo(o,i.height),h++;t.stroke(),t.closePath()},this.CellManagement={Cell:function(){this.Color=null,this.Length=0,this.X=0,this.Y=0,this.State=null,this.Clear=function(){e.brush.clearRect(this.X,this.Y,this.Length,this.Length)},this.Destroy=function(){this.Clear(),this.Color=null,this.State=null},this.Draw=function(){var t=e.brush,i=e.cellSize,n=t.createRadialGradient(this.X+this.Length/2,this.Y+this.Length/2,0,this.X+this.Length/2,this.Y+this.Length/2,i);this.Clear(),t.beginPath(),n.addColorStop(0,this.Color),n.addColorStop(1,this.Color.Darken(64)),t.fillStyle=n,t.fillRect(this.X,this.Y,this.Length,this.Length),t.stroke(),t.closePath(),t.fillStyle=null},this.FadeIn=function(){this.State=this.States.FadingIn,null===this.Color?(this.Color=e.ColorManagement.GetRandomColor(),this.Color.a=0):this.Color.a>=.5?this.State=this.States.Full:this.Color.a+=.001},this.FadeOut=function(){this.Color.a>=.001?(this.State=this.States.FadingOut,this.Color.a-=.001):this.Destroy()},this.States={FadingIn:"FadingIn",FadingOut:"FadingOut",Full:"Full"}},Cells:new Array,GetAllCells:function(){for(var t=e.cellSize,i=e.gridSize,n=Math.ceil(window.innerWidth/t),a=Math.ceil(window.innerHeight/t),l=0,h=0;a>h;){for(;n>l;){var o=new e.CellManagement.Cell;o.X=l*t+i-2,o.Y=h*t+i-2,o.Length=t-2*i+4,e.CellManagement.Cells.push(o),l++}h++,l=0}},GetRandomCell:function(){var t=Math.floor(Math.random()*(e.CellManagement.Cells.length-1-0+1))+0,i=e.CellManagement.Cells[t];return i}}};
